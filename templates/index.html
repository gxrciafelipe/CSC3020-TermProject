<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Felipe's Organizer</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js'></script>
    
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>

    <nav class="navbar navbar-expand-lg bg-body-tertiary shadow-sm mb-3">
        <div class="container-fluid justify-content-between">
            <span class="navbar-brand h1 m-0">üìÖ Felipe's Organizer</span>
            <button class="btn btn-outline-secondary btn-sm" data-bs-toggle="modal" data-bs-target="#settingsModal" aria-label="Open Settings">
                ‚öôÔ∏è Settings
            </button>
        </div>
    </nav>

    <div class="container pb-5">
        <div id="notification-area" class="alert alert-info d-none alert-dismissible fade show shadow-sm" role="alert">
            <strong>üîî Upcoming:</strong> <span id="notification-text"></span>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>

        <div id='calendar-container' class="card p-3 shadow-sm border-0">
            <div id='calendar'></div>
        </div>
    </div>

    <button class="fab" data-bs-toggle="modal" data-bs-target="#eventModal" aria-label="Add New Event">
        <span>+</span>
    </button>

    <div class="modal fade" id="eventModal" tabindex="-1" aria-labelledby="addEventTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addEventTitle">Add New Event</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="addEventForm">
                        <input type="hidden" id="eventId">

                        <div class="mb-3">
                            <label for="eventTitle" class="form-label">Title</label>
                            <input type="text" class="form-control" id="eventTitle" required>
                        </div>
                        
                        <div class="mb-3">
                            <label for="eventColor" class="form-label">Category</label>
                            <select class="form-select" id="eventColor">
                                <option value="#6f42c1">Work (Purple)</option>
                                <option value="#20c997">Personal (Teal)</option>
                                <option value="#dc3545">Deadline (Red)</option>
                                <option value="#fd7e14">Anniversary (Orange)</option>
                            </select>
                        </div>

                        <div class="mb-3">
                            <label for="eventDate" class="form-label">Date</label>
                            <input type="date" class="form-control" id="eventDate" required>
                        </div>

                        <div class="mb-3 form-check form-switch">
                            <input class="form-check-input" type="checkbox" id="allDaySwitch" checked>
                            <label class="form-check-label" for="allDaySwitch">All Day Event</label>
                        </div>

                        <div class="row mb-3" id="timeInputGroup" style="display:none;">
                            <div class="col">
                                <label for="eventTime" class="form-label" id="startTimeLabel">Start Time</label>
                                <input type="time" class="form-control" id="eventTime">
                            </div>
                            <div class="col" id="endTimeContainer">
                                <label for="eventEndTime" class="form-label">End Time</label>
                                <input type="time" class="form-control" id="eventEndTime">
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" style="background-color: #6f42c1; border:none;" onclick="saveEvent()">Save Event</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="viewEventModal" tabindex="-1" aria-labelledby="viewEventTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="viewEventTitle">Event Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p><strong>When:</strong> <span id="viewEventDate"></span></p>
                    <p><strong>Category:</strong> <span id="viewEventColor" style="display:inline-block; width: 15px; height: 15px; border-radius: 50%;"></span></p>
                </div>
                <div class="modal-footer justify-content-between">
                    <button type="button" class="btn btn-outline-danger" id="deleteEventBtn">Delete</button>
                    <div>
                        <button type="button" class="btn btn-warning me-2" id="editEventBtn">Edit</button>
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="settingsModal" tabindex="-1" aria-labelledby="settingsTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="settingsTitle">App Settings</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="form-check form-switch mb-4">
                        <input class="form-check-input" type="checkbox" id="darkModeSwitch">
                        <label class="form-check-label" for="darkModeSwitch">üåô Dark Mode</label>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Date Format (Display)</label>
                        <select class="form-select" id="dateFormatSelect">
                            <option value="YYYY-MM-DD">International (YYYY-MM-DD)</option>
                            <option value="DD-MM-YYYY">European (DD-MM-YYYY)</option>
                            <option value="MM-DD-YYYY">US (MM-DD-YYYY)</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Time Format</label>
                        <select class="form-select" id="timeFormatSelect">
                            <option value="12">12 Hour (1:00pm)</option>
                            <option value="24">24 Hour (13:00)</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">First Day of Week</label>
                        <select class="form-select" id="weekStartSelect">
                            <option value="0">Sunday</option>
                            <option value="1">Monday</option>
                        </select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" onclick="saveSettings()">Save Changes</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>